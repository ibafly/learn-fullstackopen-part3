(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{43:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var a=t(1),c=t(18),o=t.n(c),r=t(19),u=t(3),i=t(5),s=t.n(i),d="https://enigmatic-refuge-20249.herokuapp.com/api/persons",l=function(){return s.a.get(d).then((function(e){return e.data}))},b=function(e){return s.a.post(d,e).then((function(e){return e.data}))},j=function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},f=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},m=t(0),h=function(e){var n=e.inputType,t=e.inputVal,a=e.inputOnChange;return Object(m.jsxs)("div",{children:["filter shown with:",Object(m.jsx)("input",{type:n,value:t,onChange:a})]})},p=function(e){var n=e.formOnSubmit,t=e.nameInputVal,a=e.nameInputOnChange,c=e.numberInputVal,o=e.numberInputOnChange;return Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:t,onChange:a})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:c,onChange:o})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var n=e.person,t=e.onClick,a=e.dataId;return Object(m.jsxs)("div",{"data-id":a,"data-name":n.name,children:[n.name," ",n.number,Object(m.jsx)("button",{onClick:t,children:"delete"})]})},v=function(e){var n=e.persons,t=e.btnOnClick;return n.map((function(e){return Object(m.jsx)(O,{dataId:e.id,person:e,onClick:t},e.name)}))},g=function(e){var n=e.message;return n?Object(m.jsx)("div",{className:"ok-msg",children:n}):null},x=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),i=Object(u.a)(o,2),s=i[0],d=i[1],O=Object(a.useState)(""),x=Object(u.a)(O,2),C=x[0],w=x[1],k=Object(a.useState)(""),I=Object(u.a)(k,2),L=I[0],E=I[1],S=Object(a.useState)(null),y=Object(u.a)(S,2),V=y[0],T=y[1];function A(){setTimeout((function(){T(null)}),5e3)}Object(a.useEffect)((function(){l().then((function(e){c(e)})).catch((function(e){console.log("axios.get promise chain failed")}))}),[]);var D=t.filter((function(e){return e.name.toLocaleLowerCase().includes(L.toLocaleLowerCase())}))||Object(r.a)(t);return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(g,{message:V}),Object(m.jsx)(h,{inputType:"search",inputVal:L,inputOnChange:function(e){E(e.target.value)}}),Object(m.jsx)("h3",{children:"Add a new"}),Object(m.jsx)(p,{formOnSubmit:function(e){e.preventDefault();var n={name:s,number:C},a=t.find((function(e){return e.name.toLocaleLowerCase()===s.toLocaleLowerCase()}));a?window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&f(a.id,n).then((function(e){var n=t.map((function(n){return n.name===a.name?e:n}));c(n),T("Updated number of "+a.name),A()})).catch((function(e){T(a.name+" has already been removed from server"),A()})):b(n).then((function(e){c(t.concat(e)),T("Added "+e.name),A()})).catch((function(e){console.log("axios.post add new promise chain failed")})),d(""),w("")},nameInputVal:s,nameInputOnChange:function(e){d(e.target.value)},numberInputVal:C,numberInputOnChange:function(e){w(e.target.value)}}),Object(m.jsx)("h3",{children:"Numbers"}),Object(m.jsx)(v,{persons:D,btnOnClick:function(e){var n=e.target.closest("div").getAttribute("data-id"),a=e.target.closest("div").getAttribute("data-name");window.confirm("Delete "+a+"?")&&j(n).then((function(e){console.log("DELETE response",e);var n=t.filter((function(e){return e.name!==a}));c(n)})).catch((function(e){console.log("person DELETE promise chain failed")}))}})]})};t(43);o.a.render(Object(m.jsx)(x,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.c3867040.chunk.js.map