{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","res","data","newObj","post","id","delete","put","Filter","inputType","inputVal","inputOnChange","type","value","onChange","PersonForm","formOnSubmit","nameInputVal","nameInputOnChange","numberInputVal","numberInputOnChange","onSubmit","Person","person","onClick","dataId","name","number","Persons","persons","btnOnClick","map","Notification","message","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newQuery","setNewQuery","msg","setMsg","setMsgToNullLater","setTimeout","useEffect","personService","initialPersons","catch","err","console","log","shownPersons","filter","toLocaleLowerCase","includes","event","target","preventDefault","newPersonInfoObj","foundPerson","find","window","confirm","updatedPerson","newPersons","returnedPerson","concat","closest","getAttribute","nameOfPersonToDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c3867040.chunk.js","sourcesContent":["import axios from \"axios\"\n\nconst baseUrl = \"https://enigmatic-refuge-20249.herokuapp.com/api/persons\"\n\nconst getAll = () => axios.get(baseUrl).then(res => res.data)\n\nconst create = newObj => axios.post(baseUrl, newObj).then(res => res.data)\n\n// can't use delete as variabale for it's a reserved word in js\nconst remove = id => axios.delete(`${baseUrl}/${id}`).then(res => res.data)\n\nconst update = (id, newObj) =>\n  axios.put(`${baseUrl}/${id}`, newObj).then(res => res.data)\n\nexport default { getAll, create, remove, update } // = { getAll: getAll, create: create ,remove: remove } i got no-anonymous-default-export warning\n","import React from \"react\"\n\nconst Filter = ({ inputType, inputVal, inputOnChange }) => {\n  return (\n    <div>\n      filter shown with:\n      <input type={inputType} value={inputVal} onChange={inputOnChange} />\n    </div>\n  )\n}\n\nexport default Filter\n","import React from \"react\"\n\nconst PersonForm = ({\n  formOnSubmit,\n  nameInputVal,\n  nameInputOnChange,\n  numberInputVal,\n  numberInputOnChange,\n}) => {\n  return (\n    <form onSubmit={formOnSubmit}>\n      <div>\n        name: <input value={nameInputVal} onChange={nameInputOnChange} />\n      </div>\n      <div>\n        number: <input value={numberInputVal} onChange={numberInputOnChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\nexport default PersonForm\n","import React from \"react\"\n\nconst Person = ({ person, onClick, dataId }) => (\n  <div data-id={dataId} data-name={person.name}>\n    {person.name} {person.number}\n    <button onClick={onClick}>delete</button>\n  </div>\n)\nconst Persons = ({ persons, btnOnClick }) =>\n  persons.map(person => (\n    <Person\n      key={person.name}\n      dataId={person.id} // i wonder why person.id can be assigned to dataId prop but not key prop. key={person.id} will arise `unique key` error in browser\n      person={person}\n      onClick={btnOnClick}\n    />\n  ))\n\nexport default Persons\n","import React from \"react\"\n\nconst Notification = ({ message }) => {\n  return !message ? null : <div className=\"ok-msg\">{message}</div>\n}\n\nexport default Notification\n","import React, { useState, useEffect } from \"react\"\n//import axios from \"axios\" // goes to services module\nimport personService from \"./services/persons\"\nimport Filter from \"./components/Filter\"\nimport PersonForm from \"./components/PersonForm\"\nimport Persons from \"./components/Persons\"\nimport Notification from \"./components/Notification\"\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState(\"\")\n  const [newNumber, setNewNumber] = useState(\"\")\n  const [newQuery, setNewQuery] = useState(\"\")\n  const [msg, setMsg] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n      .catch(err => {\n        console.log(\"axios.get promise chain failed\")\n      })\n  }, [])\n\n  function setMsgToNullLater() {\n    setTimeout(() => {\n      setMsg(null)\n    }, 5000)\n  }\n\n  const shownPersons = persons.filter(person =>\n    person.name.toLocaleLowerCase().includes(newQuery.toLocaleLowerCase())\n  ) || [...persons]\n\n  const followNewNameInput = event => {\n    setNewName(event.target.value)\n  }\n\n  const followNewNumberInput = event => {\n    setNewNumber(event.target.value)\n  }\n\n  const followNewQueryInput = event => {\n    setNewQuery(event.target.value)\n  }\n\n  const addPersonInfo = event => {\n    event.preventDefault()\n\n    const newPersonInfoObj = {\n      name: newName,\n      number: newNumber,\n      // date: new Date(), // let server side (not user browser )code generate id and time stamp\n    }\n\n    const foundPerson = persons.find(\n      person => person.name.toLocaleLowerCase() === newName.toLocaleLowerCase()\n    )\n    foundPerson\n      ? window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`\n        ) &&\n        personService\n          .update(foundPerson.id, newPersonInfoObj)\n          .then(updatedPerson => {\n            const newPersons = persons.map(person =>\n              person.name === foundPerson.name ? updatedPerson : person\n            )\n\n            setPersons(newPersons)\n            setMsg(\"Updated number of \" + foundPerson.name)\n            setMsgToNullLater()\n          })\n          .catch(err => {\n            setMsg(foundPerson.name + \" has already been removed from server\")\n            setMsgToNullLater()\n          })\n      : personService\n          .create(newPersonInfoObj)\n          .then(returnedPerson => {\n            setPersons(persons.concat(returnedPerson))\n            setMsg(\"Added \" + returnedPerson.name)\n            setMsgToNullLater()\n          })\n          .catch(err => {\n            console.log(\"axios.post add new promise chain failed\")\n          })\n\n    setNewName(\"\")\n    setNewNumber(\"\")\n  }\n\n  const deletePerson = event => {\n    const id = event.target.closest(\"div\").getAttribute(\"data-id\")\n    const nameOfPersonToDelete = event.target\n      .closest(\"div\")\n      .getAttribute(\"data-name\")\n\n    window.confirm(\"Delete \" + nameOfPersonToDelete + \"?\") &&\n      personService\n        .remove(id)\n        .then(returnedPerson => {\n          console.log(\"DELETE response\", returnedPerson) // it's a blank object\n          const newPersons = persons.filter(\n            person => person.name !== nameOfPersonToDelete\n          )\n          setPersons(newPersons)\n        })\n        .catch(err => {\n          console.log(\"person DELETE promise chain failed\")\n        })\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={msg} />\n      <Filter\n        inputType=\"search\"\n        inputVal={newQuery}\n        inputOnChange={followNewQueryInput}\n      />\n      <h3>Add a new</h3>\n      <PersonForm\n        formOnSubmit={addPersonInfo}\n        nameInputVal={newName}\n        nameInputOnChange={followNewNameInput}\n        numberInputVal={newNumber}\n        numberInputOnChange={followNewNumberInput}\n      />\n      <h3>Numbers</h3>\n      <Persons persons={shownPersons} btnOnClick={deletePerson} />\n    </div>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\nimport \"./index.css\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}