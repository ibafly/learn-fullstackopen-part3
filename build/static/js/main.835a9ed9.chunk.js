(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{43:function(n,e,t){},44:function(n,e,t){"use strict";t.r(e);var a=t(1),c=t(18),o=t.n(c),r=t(19),u=t(3),i=t(5),s=t.n(i),d="/api/persons",l=function(){return s.a.get(d).then((function(n){return n.data}))},b=function(n){return s.a.post(d,n).then((function(n){return n.data}))},j=function(n){return s.a.delete("".concat(d,"/").concat(n)).then((function(n){return n.data}))},f=function(n,e){return s.a.put("".concat(d,"/").concat(n),e).then((function(n){return n.data}))},m=t(0),h=function(n){var e=n.inputType,t=n.inputVal,a=n.inputOnChange;return Object(m.jsxs)("div",{children:["filter shown with:",Object(m.jsx)("input",{type:e,value:t,onChange:a})]})},p=function(n){var e=n.formOnSubmit,t=n.nameInputVal,a=n.nameInputOnChange,c=n.numberInputVal,o=n.numberInputOnChange;return Object(m.jsxs)("form",{onSubmit:e,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:t,onChange:a})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:c,onChange:o})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},O=function(n){var e=n.person,t=n.onClick,a=n.dataId;return Object(m.jsxs)("div",{"data-id":a,"data-name":e.name,children:[e.name," ",e.number,Object(m.jsx)("button",{onClick:t,children:"delete"})]})},v=function(n){var e=n.persons,t=n.btnOnClick;return e.map((function(n){return Object(m.jsx)(O,{dataId:n.id,person:n,onClick:t},n.name)}))},g=function(n){var e=n.message;return e?Object(m.jsx)("div",{className:"ok-msg",children:e}):null},x=function(){var n=Object(a.useState)([]),e=Object(u.a)(n,2),t=e[0],c=e[1],o=Object(a.useState)(""),i=Object(u.a)(o,2),s=i[0],d=i[1],O=Object(a.useState)(""),x=Object(u.a)(O,2),C=x[0],w=x[1],I=Object(a.useState)(""),k=Object(u.a)(I,2),L=k[0],E=k[1],S=Object(a.useState)(null),y=Object(u.a)(S,2),V=y[0],T=y[1];function A(){setTimeout((function(){T(null)}),5e3)}Object(a.useEffect)((function(){l().then((function(n){c(n)})).catch((function(n){console.log("axios.get promise chain failed")}))}),[]);var D=t.filter((function(n){return n.name.toLocaleLowerCase().includes(L.toLocaleLowerCase())}))||Object(r.a)(t);return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(g,{message:V}),Object(m.jsx)(h,{inputType:"search",inputVal:L,inputOnChange:function(n){E(n.target.value)}}),Object(m.jsx)("h3",{children:"Add a new"}),Object(m.jsx)(p,{formOnSubmit:function(n){n.preventDefault();var e={name:s,number:C},a=t.find((function(n){return n.name.toLocaleLowerCase()===s.toLocaleLowerCase()}));a?window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&f(a.id,e).then((function(n){var e=t.map((function(e){return e.name===a.name?n:e}));c(e),T("Updated number of "+a.name),A()})).catch((function(n){T(a.name+" has already been removed from server"),A()})):b(e).then((function(n){c(t.concat(n)),T("Added "+n.name),A()})).catch((function(n){console.log("axios.post add new promise chain failed")})),d(""),w("")},nameInputVal:s,nameInputOnChange:function(n){d(n.target.value)},numberInputVal:C,numberInputOnChange:function(n){w(n.target.value)}}),Object(m.jsx)("h3",{children:"Numbers"}),Object(m.jsx)(v,{persons:D,btnOnClick:function(n){var e=n.target.closest("div").getAttribute("data-id"),a=n.target.closest("div").getAttribute("data-name");window.confirm("Delete "+a+"?")&&j(e).then((function(n){console.log("DELETE response",n);var e=t.filter((function(n){return n.name!==a}));c(e)})).catch((function(n){console.log("person DELETE promise chain failed")}))}})]})};t(43);o.a.render(Object(m.jsx)(x,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.835a9ed9.chunk.js.map